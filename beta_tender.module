<?php

/**
 * @file
 * Main module file for Beta Tender.
 *
 * Provides functionality for managing Tender content creation from scanned
 * media, including OCR processing, batch tooling, and unified tender
 * dashboards.
 */

use Drupal\Core\Routing\RouteMatchInterface;

/**
 * Implements hook_help().
 */
function beta_tender_help($route_name, RouteMatchInterface $route_match) {
  switch ($route_name) {
    case 'help.page.beta_tender':
      $output = '<h3>' . t('About') . '</h3>';
      $output .= '<p>' . t('The Beta Tender module streamlines the creation of Tender content from scanned media. It includes a unified tenders overview, source upload tools, OCR integration, and batch processing capabilities.') . '</p>';
      $output .= '<h3>' . t('Features') . '</h3>';
      $output .= '<dl>';
      $output .= '<dt>' . t('Unified Tenders Overview') . '</dt>';
      $output .= '<dd>' . t('View all tenders organized by dateline (source + date) in a consolidated interface. Upload scanned media with dateline information and see author, creation dates, and moderation status at a glance.') . '</dd>';
      $output .= '<dt>' . t('Source Upload Tools') . '</dt>';
      $output .= '<dd>' . t('Upload and catalog scanned media with publication metadata for later OCR processing.') . '</dd>';
      $output .= '<dt>' . t('OCR Integration') . '</dt>';
      $output .= '<dd>' . t('Process images using either document_ocr or ocr_image modules to extract text from scanned documents.') . '</dd>';
      $output .= '<dt>' . t('Batch Processing') . '</dt>';
      $output .= '<dd>' . t('Use the Drupal Batch API to process large sets of uploads without timing out.') . '</dd>';
      $output .= '<dt>' . t('Backup & Restore Helper') . '</dt>';
      $output .= '<dd>' . t('Provides an administrative screen to expand manual export/import workflows.') . '</dd>';
      $output .= '</dl>';
      return $output;
  }
}

/**
 * Implements hook_theme().
 */
function beta_tender_theme() {
  return [
    'tender_main_page' => [
      'variables' => [
        'datelines' => [],
        'upload_form' => NULL,
      ],
    ],
    'tender_dateline_detail' => [
      'variables' => [
        'source_name' => NULL,
        'date' => NULL,
        'formatted_date' => NULL,
        'tenders' => [],
      ],
    ],
  ];
}

/**
 * Implements hook_entity_type_alter().
 */
function beta_tender_entity_type_alter(array &$entity_types) {
  // Add custom handlers if needed for tender content type.
}
